---
description: 总结正则表达式的规则和使用方法。
---

# 正则表达式

正则表达式是用于描述**字符排列**和**匹配模式**的一种**语法规则**。它主要用于**字符串的模式分割、匹配、查找及替换操作**，其中最为重要作用是**匹配**。 

## ✏ 正则表达式与通配符

**正则表达式**用来在文件中匹配符合条件的字符串，正则是**包含匹配**。`grep、awk、sed`等命令可以支持正则表达式。

> 正则表达式是包含匹配，即文件中的语句中包含了查找的字符串，那么就显示整行语句。

通配符用来匹配符合条件的文件名，通配符是完全匹配。`ls、find、cp`这些命令不支持正则表达式，所以只能使用`shell`自己的通配符来进行匹配了。

> 通配符必须是完全匹配，如`find . -name “abc？”` 查找到4个字符的文件名其中前三个字符是abc，列出的abcd、abce等文件。

## ✏ 元字符

 正则表达式包含了普通字符（A-Za-z0-9）、特殊字符（元字符）列表及它们在正则表达式中的行为。其中，如果要匹配特殊字符，需要用`\`转义，即：匹配`+`，用`\+`。在Linux中，正则表达式可以分为**基本正则表达式**和**扩展正则表达式**。

### 🖌 1、元字符总结

| 元字符 | 作用 |
| :---: | :--- |
| `^` | 匹配输入字符串的开始位置。除非在方括号表达式中使用，表示不包含该字符集合。要匹配`“^”`字符本身，使用转义符转义`“\^”`。 |
| `$` | 匹配输入字符串的结尾位置。如果设置了`RegExp`对象的`Multiline`属性，则`“$”`也匹配`‘\r’`或`‘\n’`。要匹配`“$”`字符本身，使用转义符`“\$”`。 |
| `.` | 匹配除`“\r\n”`之外的任何单个字符。 |
| `\` | 将下一个字符标记为特殊字符、原义字符、向后引用、八进制转义符。例如，`‘n’`匹配字符`“n”`。`‘\n’`匹配换行符。`‘\\’`匹配`“\”`，而`‘\(’`匹配`“(”`。 |
| `*` |  匹配前一个字符0次或任意多次，**匹配前一个字符0次**则表示可以匹配任意字符，包括空白行。 |
| `[ ]` | 字符匹配。匹配所包含的任意一个字符。 |
| `[^]` | 赋值字符集合。匹配未包含的任意一个字符。 |
| `[c1-c2]` | 字符范围。匹配指定范围内的任意一个字符。例如，`“[a-z]”`可以匹配`“a”`到`“z”`范围内的任意一个小写字符字符。注意：只有连字符（-）在字符组内部，并且出现在两个字符之间时，才能表示字符的范围；如果出现在字符组的开头，则只能表示连字符本身。 |
| `{n}` | `n`是一个非负整数，匹配确定的`n`次。例如，`“o{2}”`不能匹配`“Bob”`中的`“o”`，但是能匹配`“food”`中的两个`“o”`。 |
| `{n,}`和 `{,m}` | `n`和`m`均为非负整数，前者至少匹配`n`次，后者至多匹配`m`次。`“o{2}”`不能匹配`“Bob”`中的`“o”`，但是能匹配`“foooood”`中的所有`“o”`。`“o{1,}”`等价于`“o+”`，`“o{0,}”`等价于`“o*”`。 |
| `{n,m}` | `m`和`n`均为非负整数，其中`n<=m`，最少匹配`n`次且最多匹配`m`次。 |

### 🖌 2、扩展正则表达式元字符总结

<table>
  <thead>
    <tr>
      <th style="text-align:center">&#x5143;&#x5B57;&#x7B26;</th>
      <th style="text-align:left">&#x4F5C;&#x7528;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:center"><code>+</code>
      </td>
      <td style="text-align:left">&#x91CD;&#x590D;&#x4E00;&#x6B21;&#x6216;&#x4E00;&#x6B21;&#x4EE5;&#x4E0A;&#x7684;&#x524D;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x3002;&#x6267;&#x884C;<code>&#x201C;egrep -n &apos;wo+d&apos; test.txt&#x201D;</code>&#x547D;&#x4EE4;&#xFF0C;&#x5373;&#x53EF;&#x67E5;&#x8BE2;<code>&#x201C;wood&#x201D;</code>&#x3001;<code>&#x201C;woood&#x201D;</code>&#x3001;<code>&#x201C;woooood&#x201D;</code>&#x7B49;&#x5B57;&#x7B26;&#x4E32;&#x3002;</td>
    </tr>
    <tr>
      <td style="text-align:center"><code>?</code>
      </td>
      <td style="text-align:left">
        <p>&#x5339;&#x914D;&#x96F6;&#x6B21;&#x6216;&#x4E00;&#x6B21;&#x524D;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x3002;&#x7B49;&#x6548;&#x4E8E;
          {0,1}&#x3002; &#x5F53; ? &#x7D27;&#x968F;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x9650;&#x5B9A;&#x7B26;&#xFF08;<code>* &#x3001;+&#x3001;?&#x3001;{n}&#x3001;{n,} &#x6216; {n,m}</code>&#xFF09;&#x4E4B;&#x540E;&#x65F6;&#xFF0C;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#x662F;&#x975E;&#x8D2A;&#x5A6A;&#x7684;&#x3002;
          &#x975E;&#x8D2A;&#x5A6A;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x641C;&#x7D22;&#x5230;&#x7684;&#x3001;&#x5C3D;&#x53EF;&#x80FD;&#x5C11;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x800C;&#x9ED8;&#x8BA4;&#x7684;&#x8D2A;&#x5A6A;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x641C;&#x7D22;&#x5230;&#x7684;&#x3001;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
        <p>&#x6267;&#x884C;<code>&#x201C;egrep -n &apos;bes?t&apos; test.txt&#x201D;</code>&#x547D;&#x4EE4;&#xFF0C;&#x5373;&#x53EF;&#x67E5;&#x8BE2;<code>&#x201C;bet&#x201D; </code>&#x548C;<code> &#x201C;best&#x201D;</code>&#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
      </td>
    </tr>
    <tr>
      <td style="text-align:center"><code>|</code>
      </td>
      <td style="text-align:left">&#x4F7F;&#x7528;&#x6216;<code>(or)</code>&#x7684;&#x65B9;&#x5F0F;&#x5339;&#x914D;&#x591A;&#x4E2A;&#x5B57;&#x7B26;&#x3002;&#x6267;&#x884C;<code>&#x201C;egrep -n &apos;of|is|on&apos; test.txt&#x201D;</code>&#x547D;&#x4EE4;&#xFF0C;&#x5373;&#x53EF;&#x67E5;&#x8BE2;<code>&#x201C;of&#x201D; </code>&#x3001;<code>&#x201C;is&#x201D;</code>&#x6216;<code> &#x201C;on&#x201D;</code>&#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</td>
    </tr>
    <tr>
      <td style="text-align:center"><code>()</code>
      </td>
      <td style="text-align:left">&#x67E5;&#x627E;&#x201C;&#x7EC4;&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x6267;&#x884C;<code>&#x201C;egrep -n &apos;t(a|e)st&apos; test.txt&#x201D;</code>&#x547D;&#x4EE4;&#xFF0C;&#x5373;&#x53EF;&#x67E5;&#x8BE2;<code>&#x201C;tast&#x201D; </code>&#x548C;<code> &#x201C;test&#x201D;</code>&#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</td>
    </tr>
    <tr>
      <td style="text-align:center"><code>()+</code>
      </td>
      <td style="text-align:left">&#x5339;&#x914D;&#x591A;&#x4E2A;&#x91CD;&#x590D;&#x7684;&#x7EC4;&#x3002;&#x6267;&#x884C;<code>&#x201C;egrep -n &apos;A(xyz)+C&apos; test.txt&#x201D;</code>&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x8BE2;&#x5F00;&#x5934;&#x662F;<code>&#x201C;A&#x201D;</code>&#xFF0C;&#x7ED3;&#x5C3E;&#x662F;<code>&#x201C;C&#x201D;</code>&#xFF0C;&#x4E2D;&#x95F4;&#x6709;&#x4E00;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;<code>&#x201C;xyz&#x201D;</code>&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</td>
    </tr>
  </tbody>
</table>

### 🖌 3、非打印字符

| 非打印字符 | 匹配 | 等效于 |
| :--- | :--- | :--- |
| \f | 换页符。 | \x0c 和 \cL |
| \n | 换行符。 | \x0a 和 \cJ |
| \r | 回车符。 | \x0d 和 \cM |
| \s | 任何空白字符。 其中包括空格、制表符和换页符。 | \[ \f\n\r\t\v\] |
| \S | 任何非空白字符。 | \[^ \f\n\r\t\v\] |
| \v | 垂直制表符。 | \x0b 和 \cK |

### 🖌 4、多字符

| 多字符 | 功能 | 示例 |
| :--- | :--- | :--- |
| \b | 与一个字边界匹配；即字与非字之间的位置。 | er\b 与“never”中的“er”匹配，但与“verb”中的“er”不匹配。 |
| \B | 非边界字匹配，即非字与字之间的位置。 | er\B 与“verb”中的“er”匹配，但与“never”中的“er”不匹配。 |
| \d | 数字字符匹配，等效于 \[0-9\]。 | 在搜索字符串“12345”中，\d{2} 与“12”和“34”匹配。 \d 与“1”、“2”、“3”、“4”和“5”匹配。 |
| \D | 非数字字符匹配。 等效于  \[^0-9\]。 | \D+ 与“abc123 def”中的“abc”和“def”匹配。 |
| \a | 英文字母，等效于\[a-zA-Z\]。 | \a{3} 与 “abc123” 中的“abc”匹配。 |
| \w | 与以下任意字符匹配：A-Z、a-z、0-9 和下划线。 等效于 \[A-Za-z0-9\_\]。 | 在搜索字符串“The quick brown fox…”中，\w+ 与“The”、“quick”、“brown”和“fox”匹配。 |
| \W | 与除 A-Z、a-z、0-9 和下划线以外的任意字符匹配。 等效于 。 | 在搜索字符串“The quick brown fox…”中，\W+ 与“…”和所有空格匹配。 |



